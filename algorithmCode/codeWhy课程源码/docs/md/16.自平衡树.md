# 第15章 自平衡树

## 平衡树

二叉搜索树的优势：可以**快速地**找到给定关键字的数据项， 并且可以快速地**插入和删除数据项**。

二叉搜索树的缺陷：当插入的数据是**有序的数据**，就会造成二叉搜索树的深度过大。比如原二叉搜索树由 11 7 15 组成，如下图所示：

![image](https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/JavaScript-数据结构与算法/image.1nkd51rg5dz4.png)

当插入一组有序数据：6 5 4 3 2 就会变成深度过大的搜索二叉树，会严重影响二叉搜索树的性能。

![image](https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/JavaScript-数据结构与算法/image.154bnlgtd5z4.png)

### 非平衡树

- 比较好的二叉搜索树，它的数据应该是**左右均匀分布**的。
- 但是插入**连续数据**后，二叉搜索树中的数据分布就变得**不均匀**了，我们称这种树为**非平衡树**。
- 对于一棵**平衡二叉树**来说，插入/查找等操作的效率是 **O(log n)**。
- 而对于一棵**非平衡二叉树**来说，相当于编写了一个链表，查找效率变成了 **O(n)**。

### 树的平衡性

为了能以**较快的时间 O(log n)**来操作一棵树，我们需要**保证树总是平衡**的：

- 起码大部分是平衡的，此时的时间复杂度也是接近 O(log n) 的；
- 这就要求树中每个节点左边的子孙节点的个数，应该尽可能地等于右边的子孙节点的个数；

### 常见的平衡树

- AVL 树：是最早的一种平衡树，它通过在每个节点多存储一个额外的数据来保持树的平衡。由于 AVL 树是平衡树，所以它的时间复杂度也是 O(log n)。但插入/删除操作效率不如红黑树，开发中比较少用。
- 红黑树：同样通过一些特性来保持树的平衡，时间复杂度也是 O(log n)。进行插入/删除等操作时，性能优于 AVL 树，所以平衡树的应用基本都是红黑树。
